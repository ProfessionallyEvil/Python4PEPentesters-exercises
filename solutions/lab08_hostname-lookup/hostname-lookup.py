# Hints:
# - Start with defining a lookup procedure that takes an ip address and returns either the hostname.
# - If a hostname cannot be determined, the procedure should return the ip address.
# - You can test with ip 8.8.8.8 (Google's DNS server)
# - Then use argparse to turn this into a utility that will accept an ip address or a file path.
# - Output, if specified, should go to a file.  Otherwise output just goes to stdout

import socket
import argparse
import re

def reverse_lookup(ip):
    try:
        results = socket.gethostbyaddr(ip)
        return results[0]
    except:
        return ip


if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Reverse Lookup Tool')
    parser.add_argument('input', help='an ip address to be looked up')
    args = parser.parse_args()

    pattern = re.compile('^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$')
    match = pattern.search(args.input)
    if match is not None:
        print(reverse_lookup(args.input))
    else:
        parser.print_help()
