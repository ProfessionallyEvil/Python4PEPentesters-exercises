#!/usr/bin/python

# Generate PDF reports
# Created: 5/12/16
import os
import random
import pdfkit

dirpath = os.path.abspath("../targets/PDFReports/reports/")
try:
    os.stat(dirpath)
except:
    os.mkdir(dirpath)

with open("../files/first_names.txt") as f:
    first_names = f.readlines()

with open("../files/last_names.txt") as f:
    last_names = f.readlines()

for i in range(1,95):
    custid = random.randint(100000, 999999)

    first_name = random.choice(first_names)
    last_name = random.choice(last_names)
    ssn = random.randint(111111111, 999999999)
    ssn_chars = str(ssn)
    ssn_final = ssn_chars[:3] + "-" + ssn_chars[3:5] + "-" + ssn_chars[5:]
    earnings = "${:,.2f}".format(random.uniform(1, 1000000))

    report_string = "<html><body><table>" \
                    "<tr><td>Customer ID: </td><td>%s</td></tr>" \
                    "<tr><td>Name: </td><td>%s, %s</td></tr>" \
                    "<tr><td>SSN: </td><td>%s</td></tr>" \
                    "<tr><td>Earnings: </td><td>%s</td></tr>" \
                    "</table></body></html>" % (custid, last_name, first_name, ssn_final, earnings)

    outfile = dirpath + "/" + str(custid) + '.pdf'
    pdfkit.from_string(report_string, outfile)
